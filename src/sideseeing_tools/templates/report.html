<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{{ title }}</title>

    <!-- Bootstrap CSS -->
    <link href="static/plugins/bootstrap/bootstrap.min.css" rel="stylesheet">
    <script src="static/plugins/bootstrap/bootstrap.bundle.min.js"></script>

    <!-- Plotly.js -->
    <script src="static/plugins/plotly.min.js"></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="static/plugins/leaflet/leaflet.css"/>
    <script src="static/plugins/leaflet/leaflet.js"></script>
    <script src="static/plugins/leaflet/leaflet-heat.js"></script>

    <!-- Font Awesome -->
    <link href="static/plugins/awesome/css/all.min.css" rel="stylesheet">

    <!-- Custom libs -->
    <link rel="stylesheet" href="static/css/custom.css">
    <script src="static/js/custom.js"></script>
</head>

<body>
    <div class="sidebar">
        <h4 class="px-3">SideSeeing Dataset Report</h4>
        <hr>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="#" onclick="showSection('summary')">
                    <span class="fas fa-chart-bar me-2"></span>
                    Summary
                </a>
            </li>

            {% if sections.geo %}
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('geo')">
                    <span class="fas fa-map-marker-alt me-2"></span>
                    Geospatial Data
                </a>
            </li>
            {% endif %}

            {% if sections.sensor %}
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('sensor')">
                    <span class="fas fa-microchip me-2"></span>
                    Sensor Data
                </a>
            </li>
            {% endif %}

            {% if sections.wifi %}
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('wifi')">
                    <span class="fas fa-wifi me-2"></span>
                    Wi-Fi Data
                </a>
            </li>
            {% endif %}

            {% if sections.cell %}
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('cell')">
                    <span class="fas fa-mobile-alt me-2"></span>
                    Cell Data
                </a>
            </li>
            {% endif %}

            {% if sections.images %}
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('images')">
                    <span class="fas fa-image me-2"></span>
                    Images
                </a>
            </li>
            {% endif %}
        </ul>
        <div class="position-absolute bottom-0 w-100 p-3">
             <small class="text-muted">Generated on: {{ data_geracao }}</small>
        </div>
    </div>

    <div class="content">
        {% include 'summary.html' %}

        {% if sections.geo %}
            {% include 'geo.html' %}
        {% endif %}

        {% if sections.sensor %}
            {% include 'sensor.html' %}
        {% endif %}
        
        {% if sections.wifi %}
            {% include 'wifi.html' %}
        {% endif %}
        
        {% if sections.images %}
            {% include 'image.html' %}
        {% endif %}
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initSummaryTab === 'function') {
                // Put summaryData into a JavaScript variable
                const summaryData = {{ summary|tojson }};

                // Initialize the Summary tab
                initSummaryTab(summaryData);
            } else {
                console.error("Error: initSummaryTab() not defined.");
            }
        });
    </script>
</body>
</html>